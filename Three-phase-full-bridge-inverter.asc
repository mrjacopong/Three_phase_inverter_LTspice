Version 4
SHEET 1 8340 2452
WIRE -784 -336 -784 -368
WIRE -528 -304 -528 -336
WIRE -400 -304 -400 -336
WIRE -784 -208 -784 -256
WIRE -528 -208 -528 -224
WIRE -400 -208 -400 -224
WIRE -144 -144 -416 -144
WIRE 0 -144 -144 -144
WIRE 0 -128 -16 -128
WIRE 384 -128 64 -128
WIRE 1264 -112 1232 -112
WIRE 1408 -112 1344 -112
WIRE 1584 -112 1408 -112
WIRE 3360 -112 1664 -112
WIRE 4656 -112 3360 -112
WIRE 5744 -112 4656 -112
WIRE 4240 -96 3776 -96
WIRE 5344 -96 4880 -96
WIRE 3360 -80 3360 -112
WIRE 4240 -80 4240 -96
WIRE 5344 -80 5344 -96
WIRE 2880 -64 2416 -64
WIRE 3776 -64 3776 -96
WIRE 4064 -64 4016 -64
WIRE 4192 -64 4064 -64
WIRE 4880 -64 4880 -96
WIRE 5168 -64 5120 -64
WIRE 5296 -64 5168 -64
WIRE -144 -48 -144 -144
WIRE -128 -48 -144 -48
WIRE -16 -48 -16 -128
WIRE 2880 -48 2880 -64
WIRE 2416 -32 2416 -64
WIRE 2688 -32 2656 -32
WIRE 2832 -32 2688 -32
WIRE 4064 -16 4064 -64
WIRE 4400 -16 4336 -16
WIRE 4512 -16 4480 -16
WIRE 5168 -16 5168 -64
WIRE 5504 -16 5440 -16
WIRE 5616 -16 5584 -16
WIRE 4256 0 4240 0
WIRE 5360 0 5344 0
WIRE -704 16 -704 -16
WIRE 2688 16 2688 -32
WIRE 3088 16 3024 16
WIRE 3200 16 3168 16
WIRE 3328 16 3248 16
WIRE 4192 16 4192 -16
WIRE 5296 16 5296 -16
WIRE -736 32 -768 32
WIRE 2896 32 2880 32
WIRE 4256 32 4256 0
WIRE 4336 32 4336 -16
WIRE 4336 32 4256 32
WIRE 4512 32 4512 -16
WIRE 4624 32 4512 32
WIRE 5360 32 5360 0
WIRE 5440 32 5440 -16
WIRE 5440 32 5360 32
WIRE 5616 32 5616 -16
WIRE 5712 32 5616 32
WIRE -576 48 -672 48
WIRE -416 48 -416 -144
WIRE -416 48 -464 48
WIRE 2832 48 2832 16
WIRE 4624 48 4624 32
WIRE 4656 48 4656 -32
WIRE -736 64 -912 64
WIRE 3200 64 3200 16
WIRE 3248 64 3248 16
WIRE 3248 64 3200 64
WIRE 5712 64 5712 32
WIRE 5744 64 5744 -32
WIRE 2896 80 2896 32
WIRE 3024 80 3024 16
WIRE 3024 80 2896 80
WIRE 3328 80 3328 16
WIRE 3360 80 3360 0
WIRE 3776 80 3776 16
WIRE 3936 80 3776 80
WIRE 4880 80 4880 16
WIRE 5040 80 4880 80
WIRE -912 96 -912 64
WIRE 4256 96 4256 32
WIRE 4336 96 4336 32
WIRE 4352 96 4336 96
WIRE 4432 96 4416 96
WIRE 4512 96 4512 32
WIRE 5360 96 5360 32
WIRE 5440 96 5440 32
WIRE 5456 96 5440 96
WIRE 5536 96 5520 96
WIRE 5616 96 5616 32
WIRE -416 112 -416 48
WIRE -304 112 -416 112
WIRE -96 112 -240 112
WIRE 176 112 -96 112
WIRE 2416 112 2416 48
WIRE 2576 112 2416 112
WIRE 3776 112 3776 80
WIRE 4064 112 4064 48
WIRE 4208 112 4064 112
WIRE 4880 112 4880 80
WIRE 5168 112 5168 48
WIRE 5312 112 5168 112
WIRE -704 128 -704 80
WIRE 592 128 240 128
WIRE 2896 128 2896 80
WIRE 3024 128 3024 80
WIRE 3040 128 3024 128
WIRE 3120 128 3104 128
WIRE 3200 128 3200 64
WIRE -96 144 -96 112
WIRE 176 144 16 144
WIRE 2416 144 2416 112
WIRE 2688 144 2688 80
WIRE 2848 144 2688 144
WIRE 2848 192 2800 192
WIRE 4208 192 4208 160
WIRE 5312 192 5312 160
WIRE -912 208 -912 176
WIRE 3776 288 3776 192
WIRE 4256 288 4256 176
WIRE 4256 288 3776 288
WIRE 4880 288 4880 192
WIRE 5360 288 5360 176
WIRE 5360 288 4880 288
WIRE 2416 320 2416 224
WIRE 2896 320 2896 208
WIRE 2896 320 2416 320
WIRE 4336 320 4320 320
WIRE 4432 320 4416 320
WIRE 4528 320 4512 320
WIRE 4624 320 4624 128
WIRE 4624 320 4608 320
WIRE 5424 336 5408 336
WIRE 5520 336 5504 336
WIRE 5616 336 5600 336
WIRE 5712 336 5712 144
WIRE 5712 336 5696 336
WIRE 3040 352 3024 352
WIRE 3136 352 3120 352
WIRE 3232 352 3216 352
WIRE 3328 352 3328 160
WIRE 3328 352 3312 352
WIRE 160 368 16 368
WIRE 4320 368 4320 320
WIRE 160 384 144 384
WIRE 528 384 224 384
WIRE 5408 384 5408 336
WIRE 16 400 16 368
WIRE 16 400 -208 400
WIRE 3024 400 3024 352
WIRE 4320 416 4320 368
WIRE 4336 416 4320 416
WIRE 4416 416 4416 320
WIRE 4416 416 4400 416
WIRE 4432 416 4416 416
WIRE 4528 416 4528 320
WIRE 4528 416 4496 416
WIRE 4544 416 4528 416
WIRE 4624 416 4624 320
WIRE 4624 416 4608 416
WIRE 5408 432 5408 384
WIRE 5424 432 5408 432
WIRE 5504 432 5504 336
WIRE 5504 432 5488 432
WIRE 5520 432 5504 432
WIRE 5616 432 5616 336
WIRE 5616 432 5584 432
WIRE 5632 432 5616 432
WIRE 5712 432 5712 336
WIRE 5712 432 5696 432
WIRE 3024 448 3024 400
WIRE 3040 448 3024 448
WIRE 3120 448 3120 352
WIRE 3120 448 3104 448
WIRE 3136 448 3120 448
WIRE 3232 448 3232 352
WIRE 3232 448 3200 448
WIRE 3248 448 3232 448
WIRE 3328 448 3328 352
WIRE 3328 448 3312 448
WIRE 16 464 16 400
WIRE 32 464 16 464
WIRE 144 464 144 384
WIRE -672 528 -672 496
WIRE 2576 528 2576 112
WIRE 3360 528 3360 160
WIRE 3360 528 2576 528
WIRE 3936 528 3936 80
WIRE 4656 528 4656 128
WIRE 4656 528 3936 528
WIRE 5040 528 5040 80
WIRE 5744 528 5744 144
WIRE 5744 528 5040 528
WIRE -704 544 -736 544
WIRE -528 560 -640 560
WIRE -384 560 -416 560
WIRE -208 560 -208 400
WIRE -208 560 -384 560
WIRE 1232 560 1232 -112
WIRE 1408 560 1408 -112
WIRE -704 576 -880 576
WIRE 3360 576 3360 528
WIRE 4656 592 4656 528
WIRE 5744 592 5744 528
WIRE -880 608 -880 576
WIRE -384 624 -384 560
WIRE -272 624 -384 624
WIRE 64 624 -208 624
WIRE 336 624 64 624
WIRE -672 640 -672 592
WIRE 640 640 400 640
WIRE 64 656 64 624
WIRE 336 656 176 656
WIRE -880 720 -880 688
WIRE 3360 768 3360 656
WIRE 3616 768 3360 768
WIRE 5744 768 5744 672
WIRE 6112 768 5744 768
WIRE 4656 784 4656 672
WIRE 4800 784 4656 784
WIRE 3360 848 3360 768
WIRE 4656 864 4656 784
WIRE 5744 880 5744 768
WIRE 2896 928 2432 928
WIRE 2896 944 2896 928
WIRE 3360 944 3360 928
WIRE 3360 944 3344 944
WIRE 4192 944 3728 944
WIRE 5312 944 4848 944
WIRE 256 960 112 960
WIRE 2432 960 2432 928
WIRE 2720 960 2672 960
WIRE 2848 960 2720 960
WIRE 4192 960 4192 944
WIRE 5312 960 5312 944
WIRE 256 976 240 976
WIRE 672 976 320 976
WIRE 3728 976 3728 944
WIRE 4016 976 3968 976
WIRE 4144 976 4016 976
WIRE 4848 976 4848 944
WIRE 5136 976 5088 976
WIRE 5264 976 5136 976
WIRE 4400 992 4336 992
WIRE 4512 992 4480 992
WIRE 3088 1008 3024 1008
WIRE 3200 1008 3168 1008
WIRE 5488 1008 5424 1008
WIRE 5600 1008 5568 1008
WIRE -688 1024 -688 992
WIRE 2720 1024 2720 960
WIRE 2912 1024 2896 1024
WIRE -720 1040 -752 1040
WIRE 2848 1040 2848 1008
WIRE 4016 1040 4016 976
WIRE 4208 1040 4192 1040
WIRE 5136 1040 5136 976
WIRE 5328 1040 5312 1040
WIRE -544 1056 -656 1056
WIRE -400 1056 -432 1056
WIRE 112 1056 112 960
WIRE 112 1056 -400 1056
WIRE 128 1056 112 1056
WIRE 240 1056 240 976
WIRE 3200 1056 3200 1008
WIRE 3312 1056 3200 1056
WIRE 4144 1056 4144 1024
WIRE 5264 1056 5264 1024
WIRE -720 1072 -896 1072
WIRE 2912 1072 2912 1024
WIRE 3024 1072 3024 1008
WIRE 3024 1072 2912 1072
WIRE 3312 1072 3312 1056
WIRE 3344 1072 3344 944
WIRE 4208 1072 4208 1040
WIRE 4336 1072 4336 992
WIRE 4336 1072 4208 1072
WIRE 4512 1072 4512 992
WIRE 4624 1072 4512 1072
WIRE 5328 1072 5328 1040
WIRE 5424 1072 5424 1008
WIRE 5424 1072 5328 1072
WIRE 5600 1072 5600 1008
WIRE 5712 1072 5600 1072
WIRE 4624 1088 4624 1072
WIRE 4656 1088 4656 944
WIRE 5712 1088 5712 1072
WIRE 5744 1088 5744 960
WIRE -896 1104 -896 1072
WIRE 2432 1104 2432 1040
WIRE 2592 1104 2432 1104
WIRE 4336 1104 4336 1072
WIRE 4352 1104 4336 1104
WIRE 4432 1104 4416 1104
WIRE 4512 1104 4512 1072
WIRE -400 1120 -400 1056
WIRE -288 1120 -400 1120
WIRE 160 1120 -224 1120
WIRE 2912 1120 2912 1072
WIRE 3024 1120 3024 1072
WIRE 3040 1120 3024 1120
WIRE 3120 1120 3104 1120
WIRE 3200 1120 3200 1056
WIRE 3728 1120 3728 1056
WIRE 3888 1120 3728 1120
WIRE 4848 1120 4848 1056
WIRE 5008 1120 4848 1120
WIRE 5424 1120 5424 1072
WIRE 5440 1120 5424 1120
WIRE 5520 1120 5504 1120
WIRE 5600 1120 5600 1072
WIRE -688 1136 -688 1088
WIRE 2432 1136 2432 1104
WIRE 2720 1136 2720 1088
WIRE 2864 1136 2720 1136
WIRE 4208 1136 4208 1072
WIRE 5328 1136 5328 1072
WIRE 3728 1152 3728 1120
WIRE 4016 1152 4016 1104
WIRE 4160 1152 4016 1152
WIRE 4848 1152 4848 1120
WIRE 5136 1152 5136 1104
WIRE 5280 1152 5136 1152
WIRE -896 1216 -896 1184
WIRE 160 1216 160 1120
WIRE 432 1216 160 1216
WIRE 2864 1216 2864 1184
WIRE 672 1232 496 1232
WIRE 4160 1232 4160 1200
WIRE 5280 1232 5280 1200
WIRE 160 1248 160 1216
WIRE 432 1248 272 1248
WIRE 2432 1312 2432 1216
WIRE 2912 1312 2912 1200
WIRE 2912 1312 2432 1312
WIRE 3024 1328 3008 1328
WIRE 3120 1328 3104 1328
WIRE 3216 1328 3200 1328
WIRE 3312 1328 3312 1152
WIRE 3312 1328 3296 1328
WIRE 4336 1344 4320 1344
WIRE 4432 1344 4416 1344
WIRE 4528 1344 4512 1344
WIRE 4624 1344 4624 1168
WIRE 4624 1344 4608 1344
WIRE 5424 1344 5408 1344
WIRE 5520 1344 5504 1344
WIRE 5616 1344 5600 1344
WIRE 5712 1344 5712 1168
WIRE 5712 1344 5696 1344
WIRE 3008 1376 3008 1328
WIRE 4320 1392 4320 1344
WIRE 5408 1392 5408 1344
WIRE 3008 1424 3008 1376
WIRE 3024 1424 3008 1424
WIRE 3104 1424 3104 1328
WIRE 3104 1424 3088 1424
WIRE 3120 1424 3104 1424
WIRE 3216 1424 3216 1328
WIRE 3216 1424 3184 1424
WIRE 3232 1424 3216 1424
WIRE 3312 1424 3312 1328
WIRE 3312 1424 3296 1424
WIRE 4320 1440 4320 1392
WIRE 4336 1440 4320 1440
WIRE 4416 1440 4416 1344
WIRE 4416 1440 4400 1440
WIRE 4432 1440 4416 1440
WIRE 4528 1440 4528 1344
WIRE 4528 1440 4496 1440
WIRE 4544 1440 4528 1440
WIRE 4624 1440 4624 1344
WIRE 4624 1440 4608 1440
WIRE 5408 1440 5408 1392
WIRE 5424 1440 5408 1440
WIRE 5504 1440 5504 1344
WIRE 5504 1440 5488 1440
WIRE 5520 1440 5504 1440
WIRE 5616 1440 5616 1344
WIRE 5616 1440 5584 1440
WIRE 5632 1440 5616 1440
WIRE 5712 1440 5712 1344
WIRE 5712 1440 5696 1440
WIRE 2592 1520 2592 1104
WIRE 3344 1520 3344 1152
WIRE 3344 1520 2592 1520
WIRE 3728 1520 3728 1232
WIRE 4208 1520 4208 1216
WIRE 4208 1520 3728 1520
WIRE 4848 1520 4848 1232
WIRE 5328 1520 5328 1216
WIRE 5328 1520 4848 1520
WIRE 3888 1568 3888 1120
WIRE 4656 1568 4656 1168
WIRE 4656 1568 3888 1568
WIRE 5008 1568 5008 1120
WIRE 5744 1568 5744 1168
WIRE 5744 1568 5008 1568
WIRE 3344 1584 3344 1520
WIRE 3616 1584 3616 768
WIRE 3648 1584 3616 1584
WIRE 4656 1584 4656 1568
WIRE 5744 1584 5744 1568
WIRE 1232 1664 1232 640
WIRE 1408 1664 1408 624
WIRE 1408 1664 1232 1664
WIRE 3344 1664 1408 1664
WIRE 3648 1664 3344 1664
WIRE 4656 1664 3648 1664
WIRE 5744 1664 4656 1664
WIRE 1232 1712 1232 1664
WIRE 3616 1776 3616 1584
WIRE 4800 1776 4800 784
WIRE 6112 1776 6112 768
WIRE 3616 1888 3616 1856
WIRE 4800 1888 4800 1856
WIRE 6112 1888 6112 1856
WIRE 3616 2048 3616 1968
WIRE 3952 2048 3616 2048
WIRE 4800 2048 4800 1968
WIRE 4800 2048 3952 2048
WIRE 6112 2048 6112 1968
WIRE 6112 2048 4800 2048
FLAG 1232 1712 0
FLAG -528 -208 0
FLAG -400 -208 0
FLAG -912 208 0
FLAG -784 -208 0
FLAG 384 -128 Ta_p
FLAG 592 128 Ta_m
FLAG 2672 960 Ta_m
FLAG -528 -336 Vcc
FLAG -704 -16 Vcc
FLAG -704 128 Vee
FLAG -400 -336 Vee
FLAG -784 -368 Vt
FLAG -768 32 Vt
FLAG -880 720 0
FLAG 528 384 Tb_p
FLAG 640 640 Tb_m
FLAG -672 496 Vcc
FLAG -672 640 Vee
FLAG -736 544 Vt
FLAG -896 1216 0
FLAG 672 976 Tc_p
FLAG 672 1232 Tc_m
FLAG -688 992 Vcc
FLAG -688 1136 Vee
FLAG -752 1040 Vt
FLAG 5120 -64 Tc_p
FLAG 5088 976 Tc_m
FLAG 2832 48 0
FLAG 2656 -32 Ta_p
FLAG 4016 -64 Tb_p
FLAG 3968 976 Tb_m
FLAG 2848 1040 0
FLAG 2864 1216 0
FLAG 4144 1056 0
FLAG 4160 1232 0
FLAG 4192 16 0
FLAG 4208 192 0
FLAG 5296 16 0
FLAG 5312 192 0
FLAG 5264 1056 0
FLAG 5280 1232 0
FLAG 2800 192 0
FLAG 2672 16 0
FLAG 4048 -16 0
FLAG 5152 -16 0
FLAG 5120 1040 0
FLAG 4000 1040 0
FLAG 2704 1024 0
FLAG 3952 2128 0
FLAG 1184 -320 0
FLAG 1184 -400 Temp
FLAG -304 128 0
FLAG -272 640 0
FLAG -288 1136 0
FLAG 3008 1376 Temp
FLAG 4320 1392 Temp
FLAG 5408 1392 Temp
FLAG 3024 400 Temp
FLAG 4320 368 Temp
FLAG 5408 384 Temp
SYMBOL voltage 1232 544 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 600
SYMBOL cap 1392 560 R0
SYMATTR InstName C1
SYMATTR Value 400µ, IC=600
SYMATTR SpiceLine Rser=0 Rpar=1Meg
SYMBOL voltage -912 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vc1
SYMATTR Value SINE(0 9 {Ff})
SYMBOL Comparators\\LT1721 -704 -16 R0
SYMATTR InstName U1
SYMBOL voltage -528 -320 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 10
SYMBOL voltage -400 -320 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value -10
SYMBOL voltage -880 592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vc2
SYMATTR Value SINE(0 9 {Ff} 0 0 120)
SYMBOL Comparators\\LT1721 -672 496 R0
SYMATTR InstName U4
SYMBOL voltage -896 1088 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vc3
SYMATTR Value SINE(0 9 {Ff} 0 0 240)
SYMBOL Comparators\\LT1721 -688 992 R0
SYMATTR InstName U7
SYMBOL res 3632 1872 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value {Rload}
SYMBOL ind 6096 1872 R0
SYMATTR InstName L3
SYMATTR Value {Lload}
SYMBOL Digital\\and 208 80 R0
SYMATTR InstName A1
SYMBOL ZZZ\\LTspiceControlLibrary\\Math\\Functions\\delay -112 -16 R0
SYMATTR Value t={DeadT}
SYMATTR InstName U11
SYMBOL Digital\\and 32 -176 R0
SYMATTR InstName A2
SYMBOL Digital\\and 368 592 R0
SYMATTR InstName A3
SYMBOL Digital\\and 192 336 R0
SYMATTR InstName A4
SYMBOL Digital\\and 464 1184 R0
SYMATTR InstName A5
SYMBOL Digital\\and 288 928 R0
SYMATTR InstName A6
SYMBOL ZZZ\\LTspiceControlLibrary\\Math\\Functions\\delay -80 176 R0
SYMATTR Value t={DeadT}
SYMATTR InstName U10
SYMBOL ZZZ\\LTspiceControlLibrary\\Math\\Functions\\delay 48 496 R0
SYMATTR Value t={DeadT}
SYMATTR InstName U12
SYMBOL ZZZ\\LTspiceControlLibrary\\Math\\Functions\\delay 80 688 R0
SYMATTR Value t={DeadT}
SYMATTR InstName U13
SYMBOL ZZZ\\LTspiceControlLibrary\\Math\\Functions\\delay 144 1088 R0
SYMATTR Value t={DeadT}
SYMATTR InstName U14
SYMBOL ZZZ\\LTspiceControlLibrary\\Math\\Functions\\delay 176 1280 R0
SYMATTR Value t={DeadT}
SYMATTR InstName U15
SYMBOL ind 1360 -128 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L4
SYMATTR Value 1µ
SYMATTR SpiceLine Rser=1m
SYMBOL ind 3376 16 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L8
SYMATTR Value {Lstray}
SYMATTR SpiceLine Rser=0
SYMBOL ind 4672 -16 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L9
SYMATTR Value {Lstray}
SYMATTR SpiceLine Rser=0
SYMBOL ind 5760 -16 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L10
SYMATTR Value {Lstray}
SYMATTR SpiceLine Rser=0
SYMBOL ind 3376 672 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L6
SYMATTR Value {Lstray}
SYMATTR SpiceLine Rser=0
SYMBOL ind 3360 1680 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L12
SYMATTR Value {Lstray}
SYMATTR SpiceLine Rser=0
SYMBOL ind 4672 1680 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L13
SYMATTR Value {Lstray}
SYMATTR SpiceLine Rser=0
SYMBOL sw 2880 48 M180
SYMATTR InstName S7
SYMBOL voltage 2416 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {Vgsp}
SYMBOL sw 2896 224 M180
SYMATTR InstName S1
SYMBOL ind 4672 688 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L7
SYMATTR Value {Lstray}
SYMATTR SpiceLine Rser=0
SYMBOL ind 5760 1680 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L15
SYMATTR Value {Lstray}
SYMATTR SpiceLine Rser=0
SYMBOL ind 5760 688 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L16
SYMATTR Value {Lstray}
SYMATTR SpiceLine Rser=0
SYMBOL ind 3376 944 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L11
SYMATTR Value {Lstray}
SYMATTR SpiceLine Rser=0
SYMBOL ind 4672 960 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L14
SYMATTR Value {Lstray}
SYMATTR SpiceLine Rser=0
SYMBOL ind 5760 976 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L17
SYMATTR Value {Lstray}
SYMATTR SpiceLine Rser=0
SYMBOL voltage 2416 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V11
SYMATTR Value {Vgsm}
SYMBOL sw 2896 1040 M180
SYMATTR InstName S13
SYMBOL voltage 2432 944 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V12
SYMATTR Value {Vgsp}
SYMBOL sw 2912 1216 M180
SYMATTR InstName S14
SYMBOL voltage 2432 1120 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V13
SYMATTR Value {Vgsm}
SYMBOL sw 4192 1056 M180
SYMATTR InstName S4
SYMBOL voltage 3728 960 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value {Vgsp}
SYMBOL sw 4208 1232 M180
SYMATTR InstName S5
SYMBOL voltage 3728 1136 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value {Vgsm}
SYMBOL sw 4240 16 M180
SYMATTR InstName S6
SYMBOL voltage 3776 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V14
SYMATTR Value {Vgsp}
SYMBOL sw 4256 192 M180
SYMATTR InstName S8
SYMBOL voltage 3776 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V15
SYMATTR Value {Vgsm}
SYMBOL sw 5344 16 M180
SYMATTR InstName S9
SYMBOL voltage 4880 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V16
SYMATTR Value {Vgsp}
SYMBOL sw 5360 192 M180
SYMATTR InstName S10
SYMBOL voltage 4880 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V17
SYMATTR Value {Vgsm}
SYMBOL sw 5312 1056 M180
SYMATTR InstName S11
SYMBOL voltage 4848 960 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V18
SYMATTR Value {Vgsp}
SYMBOL sw 5328 1232 M180
SYMATTR InstName S12
SYMBOL voltage 4848 1136 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V19
SYMATTR Value {Vgsm}
SYMBOL Digital\\inv 2752 16 R90
SYMATTR InstName A7
SYMBOL Digital\\inv 4128 -16 R90
SYMATTR InstName A9
SYMBOL Digital\\inv 5232 -16 R90
SYMATTR InstName A10
SYMBOL Digital\\inv 5200 1040 R90
SYMATTR InstName A11
SYMBOL Digital\\inv 4080 1040 R90
SYMATTR InstName A12
SYMBOL Digital\\inv 2784 1024 R90
SYMATTR InstName A13
SYMBOL res 3632 1568 R0
SYMATTR InstName R18
SYMATTR Value 1e9
SYMBOL res 3936 2032 R0
SYMATTR InstName R8
SYMATTR Value 1e9
SYMBOL voltage 1184 -416 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value {Tamb}
SYMBOL ind 1680 -128 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L5
SYMATTR Value 1n
SYMATTR SpiceLine Rser=1m
SYMBOL Digital\\inv -304 48 R0
SYMATTR InstName A8
SYMBOL Digital\\inv -272 560 R0
SYMATTR InstName A14
SYMBOL Digital\\inv -288 1056 R0
SYMATTR InstName A15
SYMBOL ZZZ\\LTspiceControlLibrary\\Math\\Functions\\delay -528 1088 R0
SYMATTR Value t={DeadT}/10
SYMATTR InstName U2
SYMBOL ZZZ\\LTspiceControlLibrary\\Math\\Functions\\delay -512 592 R0
SYMATTR Value t={DeadT}/10
SYMATTR InstName U3
SYMBOL ZZZ\\LTspiceControlLibrary\\Math\\Functions\\delay -560 80 R0
SYMATTR Value t={DeadT}/10
SYMATTR InstName U5
SYMBOL res 3008 1344 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 3 49 VBottom 2
SYMATTR InstName R3
SYMATTR Value {Rth1}
SYMBOL res 3104 1344 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 2 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value {Rth2}
SYMBOL res 3200 1344 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -1 64 VBottom 2
SYMATTR InstName R9
SYMATTR Value {Rth3}
SYMBOL cap 3024 1440 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 226 128 VBottom 2
SYMATTR InstName C2
SYMATTR Value {Cth1}, IC = {-Temp_init/3}
SYMBOL cap 3120 1440 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 203 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value {Cth2}, IC = {-Temp_init/3}
SYMBOL cap 3232 1440 R270
WINDOW 0 34 30 VTop 2
WINDOW 3 180 -80 VBottom 2
SYMATTR InstName C4
SYMATTR Value {Cth3}, IC = {-Temp_init/3}
SYMBOL CPM3-1200-0021A 3328 1104 R90
SYMATTR InstName U8
SYMBOL CPM3-1200-0021A 4640 1120 R90
SYMATTR InstName U9
SYMBOL res 4320 1360 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 3 49 VBottom 2
SYMATTR InstName R12
SYMATTR Value {Rth1}
SYMBOL res 4416 1360 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 2 56 VBottom 2
SYMATTR InstName R13
SYMATTR Value {Rth2}
SYMBOL res 4512 1360 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -1 64 VBottom 2
SYMATTR InstName R15
SYMATTR Value {Rth3}
SYMBOL cap 4336 1456 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 226 128 VBottom 2
SYMATTR InstName C5
SYMATTR Value {Cth1}, IC = {-Temp_init/3}
SYMBOL cap 4432 1456 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 203 32 VBottom 2
SYMATTR InstName C6
SYMATTR Value {Cth2}, IC = {-Temp_init/3}
SYMBOL cap 4544 1456 R270
WINDOW 0 34 30 VTop 2
WINDOW 3 180 -80 VBottom 2
SYMATTR InstName C7
SYMATTR Value {Cth3}, IC = {-Temp_init/3}
SYMBOL CPM3-1200-0021A 5728 1120 R90
SYMATTR InstName U16
SYMBOL res 5408 1360 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 3 49 VBottom 2
SYMATTR InstName R17
SYMATTR Value {Rth1}
SYMBOL res 5504 1360 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 2 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value {Rth2}
SYMBOL res 5600 1360 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -1 64 VBottom 2
SYMATTR InstName R20
SYMATTR Value {Rth3}
SYMBOL cap 5424 1456 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 226 128 VBottom 2
SYMATTR InstName C8
SYMATTR Value {Cth1}, IC = {-Temp_init/3}
SYMBOL cap 5520 1456 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 203 32 VBottom 2
SYMATTR InstName C9
SYMATTR Value {Cth2}, IC = {-Temp_init/3}
SYMBOL cap 5632 1456 R270
WINDOW 0 34 30 VTop 2
WINDOW 3 180 -80 VBottom 2
SYMATTR InstName C10
SYMATTR Value {Cth3}, IC = {-Temp_init/3}
SYMBOL res 4816 1872 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value {Rload}
SYMBOL res 6128 1872 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value {Rload}
SYMBOL ind 4784 1872 R0
SYMATTR InstName L1
SYMATTR Value {Lload}
SYMBOL ind 3600 1872 R0
SYMATTR InstName L2
SYMATTR Value {Lload}
SYMBOL voltage -784 -352 R0
WINDOW 3 -190 190 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(-10 10 0 50e-6 50e-6 0.00002m 100e-6)
SYMATTR InstName V7
SYMBOL res 3024 368 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 3 49 VBottom 2
SYMATTR InstName R21
SYMATTR Value {Rth1}
SYMBOL res 3120 368 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 2 56 VBottom 2
SYMATTR InstName R22
SYMATTR Value {Rth2}
SYMBOL res 3216 368 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -1 64 VBottom 2
SYMATTR InstName R23
SYMATTR Value {Rth3}
SYMBOL cap 3040 464 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 226 128 VBottom 2
SYMATTR InstName C11
SYMATTR Value {Cth1}, IC = {-Temp_init/3}
SYMBOL cap 3136 464 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 203 32 VBottom 2
SYMATTR InstName C12
SYMATTR Value {Cth2}, IC = {-Temp_init/3}
SYMBOL cap 3248 464 R270
WINDOW 0 34 30 VTop 2
WINDOW 3 180 -80 VBottom 2
SYMATTR InstName C13
SYMATTR Value {Cth3}, IC = {-Temp_init/3}
SYMBOL CPM3-1200-0021A 3344 112 R90
SYMATTR InstName U6
SYMBOL CPM3-1200-0021A 4640 80 R90
SYMATTR InstName U17
SYMBOL CPM3-1200-0021A 5728 96 R90
SYMATTR InstName U18
SYMBOL res 4320 336 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 3 49 VBottom 2
SYMATTR InstName R24
SYMATTR Value {Rth1}
SYMBOL res 4416 336 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 2 56 VBottom 2
SYMATTR InstName R25
SYMATTR Value {Rth2}
SYMBOL res 4512 336 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -1 64 VBottom 2
SYMATTR InstName R26
SYMATTR Value {Rth3}
SYMBOL cap 4336 432 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 226 128 VBottom 2
SYMATTR InstName C14
SYMATTR Value {Cth1}, IC = {-Temp_init/3}
SYMBOL cap 4432 432 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 203 32 VBottom 2
SYMATTR InstName C15
SYMATTR Value {Cth2}, IC = {-Temp_init/3}
SYMBOL cap 4544 432 R270
WINDOW 0 34 30 VTop 2
WINDOW 3 180 -80 VBottom 2
SYMATTR InstName C16
SYMATTR Value {Cth3}, IC = {-Temp_init/3}
SYMBOL res 5408 352 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 3 49 VBottom 2
SYMATTR InstName R27
SYMATTR Value {Rth1}
SYMBOL res 5504 352 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 2 56 VBottom 2
SYMATTR InstName R28
SYMATTR Value {Rth2}
SYMBOL res 5600 352 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -1 64 VBottom 2
SYMATTR InstName R29
SYMATTR Value {Rth3}
SYMBOL cap 5424 448 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 226 128 VBottom 2
SYMATTR InstName C17
SYMATTR Value {Cth1}, IC = {-Temp_init/3}
SYMBOL cap 5520 448 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 203 32 VBottom 2
SYMATTR InstName C18
SYMATTR Value {Cth2}, IC = {-Temp_init/3}
SYMBOL cap 5632 448 R270
WINDOW 0 34 30 VTop 2
WINDOW 3 180 -80 VBottom 2
SYMATTR InstName C19
SYMATTR Value {Cth3}, IC = {-Temp_init/3}
SYMBOL res 3184 992 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value {Rgon}
SYMBOL res 3216 1104 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R31
SYMATTR Value {Rgoff}
SYMBOL diode 3104 1104 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMBOL res 3184 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {Rgon}
SYMBOL res 3216 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {Rgoff}
SYMBOL diode 3104 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMBOL res 4496 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {Rgon}
SYMBOL res 4528 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value {Rgoff}
SYMBOL diode 4416 80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMBOL res 5600 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value {Rgon}
SYMBOL res 5632 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value {Rgoff}
SYMBOL diode 5520 80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMBOL res 5584 992 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value {Rgon}
SYMBOL res 5616 1104 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R33
SYMATTR Value {Rgoff}
SYMBOL diode 5504 1104 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMBOL res 4496 976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R34
SYMATTR Value {Rgon}
SYMBOL res 4528 1088 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R35
SYMATTR Value {Rgoff}
SYMBOL diode 4416 1088 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D6
TEXT 2368 -472 Left 2 !.model SW SW(Ron=2m Roff=100Meg Vt=0.5)
TEXT 1800 -456 Left 2 !.tran 10m
TEXT 4696 1808 Right 2 ;Load
TEXT 3336 -160 Left 2 ;Leg A
TEXT 4608 -168 Left 2 ;Leg B
TEXT 5704 -184 Left 2 ;Leg C
TEXT -184 -304 Left 4 ;Full bridge 3 phase inverter: PWM sinusoidal modulation
TEXT 3072 -456 Left 2 !.param DeadT=0.5u Lstray=10n/4 Vgsp=18 Vgsm=5 Rgon=12 Rgoff=8 Ff=500
TEXT -240 -608 Left 2 ;CONTROL
TEXT 1112 -544 Left 2 ;TEMPERATURE
TEXT 3656 -528 Left 2 ;Parameters, feel free to play with those
TEXT 1768 -528 Left 2 ;Simulation setting
TEXT 2584 -528 Left 2 ;Models
TEXT 5344 -528 Left 2 ;ISTRUCTIONS!!
TEXT 4936 -464 Left 2 ;the mosfet model "C2M0280120D" should be in the same directory of the simulation\nA screenshot of the solver setting is present in this directory of something does not work\n!! If it does not start, don't worry, just press "esc" few times until the simulation starts:\n   It will skip some unecessary check that the solver wants to do, but i made it work witouth
TEXT -600 1600 Left 1 ;Jacopo F. 05/11/2024\nCredits to: https://mick001.github.io/Circuits-LTSpice/
TEXT 1592 -488 Left 2 !.option abstol = 1e-6 Gmin = 1e-9 chgtol = 1e-12
TEXT 2368 -416 Left 2 !.include CPM3-1200-0021A.lib
TEXT 3072 -344 Left 2 !.param Rth1=0.084144 Rth2=0.347134 Rth3=0.365772 Cth1=0.054702 Cth2=1.654062 Cth3=0.164628 Tamb=70 Temp_init=80-{Tamb}
TEXT 3072 -400 Left 2 !.param Rload=1.1455 Lload=1.7660e-04
TEXT 3080 -368 Left 2 ;Thermal
TEXT 3080 -480 Left 2 ;Various
TEXT 3080 -424 Left 2 ;Load
RECTANGLE Normal -1008 -528 992 1424 2
RECTANGLE Normal 1344 -256 1024 -528 2
RECTANGLE Normal 2224 -432 1456 -512 2
RECTANGLE Normal 6048 -320 4880 -512 2
RECTANGLE Normal 2976 -368 2336 -512 2
RECTANGLE Normal 4704 -320 3056 -512 2
